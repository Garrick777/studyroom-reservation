# ðŸ“Š æ•°æ®åº“è®¾è®¡æ–‡æ¡£

## æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“åç§°**ï¼šstudy_room_db
- **å­—ç¬¦é›†**ï¼šutf8mb4
- **æŽ’åºè§„åˆ™**ï¼šutf8mb4_general_ci
- **å­˜å‚¨å¼•æ“Ž**ï¼šInnoDB
- **è¡¨æ•°é‡**ï¼š27å¼ 

---

## è¡¨æ¸…å•æ€»è§ˆ

| åºå· | è¡¨å | è¯´æ˜Ž | åˆ†ç±» |
|-----|-----|-----|-----|
| 1 | user | ç”¨æˆ·è¡¨ | ç”¨æˆ·ç›¸å…³ |
| 2 | study_room | è‡ªä¹ å®¤è¡¨ | è‡ªä¹ å®¤ç›¸å…³ |
| 3 | seat | åº§ä½è¡¨ | è‡ªä¹ å®¤ç›¸å…³ |
| 4 | time_slot | æ—¶æ®µè¡¨ | è‡ªä¹ å®¤ç›¸å…³ |
| 5 | reservation | é¢„çº¦è¡¨ | é¢„çº¦ç›¸å…³ |
| 6 | violation_record | è¿çº¦è®°å½•è¡¨ | ä¿¡ç”¨ç›¸å…³ |
| 7 | credit_record | ä¿¡ç”¨ç§¯åˆ†è®°å½•è¡¨ | ä¿¡ç”¨ç›¸å…³ |
| 8 | notice | å…¬å‘Šè¡¨ | æ¶ˆæ¯å…¬å‘Š |
| 9 | system_config | ç³»ç»Ÿé…ç½®è¡¨ | ç³»ç»Ÿç®¡ç† |
| 10 | blacklist | é»‘åå•è¡¨ | ç”¨æˆ·ç›¸å…³ |
| 11 | operation_log | æ“ä½œæ—¥å¿—è¡¨ | ç³»ç»Ÿç®¡ç† |
| 12 | favorite | æ”¶è—è¡¨ | ç”¨æˆ·ç›¸å…³ |
| 13 | check_in_record | æ¯æ—¥ç­¾åˆ°æ‰“å¡è¡¨ | æ‰“å¡ç›¸å…³ |
| 14 | study_goal | å­¦ä¹ ç›®æ ‡è¡¨ | ç›®æ ‡ç›¸å…³ |
| 15 | achievement | æˆå°±å®šä¹‰è¡¨ | æˆå°±ç³»ç»Ÿ |
| 16 | user_achievement | ç”¨æˆ·æˆå°±è¡¨ | æˆå°±ç³»ç»Ÿ |
| 17 | message | æ¶ˆæ¯è¡¨ | æ¶ˆæ¯å…¬å‘Š |
| 18 | reminder | é¢„çº¦æé†’è¡¨ | é¢„çº¦ç›¸å…³ |
| 19 | seat_review | åº§ä½è¯„ä»·è¡¨ | è‡ªä¹ å®¤ç›¸å…³ |
| 20 | room_daily_stats | è‡ªä¹ å®¤æ¯æ—¥ç»Ÿè®¡è¡¨ | ç»Ÿè®¡ç›¸å…³ |
| 21 | friendship | å¥½å‹å…³ç³»è¡¨ | ç¤¾äº¤ç›¸å…³ |
| 22 | study_group | å­¦ä¹ å°ç»„è¡¨ | ç¤¾äº¤ç›¸å…³ |
| 23 | group_member | å°ç»„æˆå‘˜è¡¨ | ç¤¾äº¤ç›¸å…³ |
| 24 | ranking_snapshot | æŽ’è¡Œæ¦œå¿«ç…§è¡¨ | ç»Ÿè®¡ç›¸å…³ |
| 25 | feedback | åé¦ˆå»ºè®®è¡¨ | ç”¨æˆ·ç›¸å…³ |
| 26 | point_product | ç§¯åˆ†å•†åŸŽå•†å“è¡¨ | å•†åŸŽç›¸å…³ |
| 27 | point_exchange | ç§¯åˆ†å…‘æ¢è®°å½•è¡¨ | å•†åŸŽç›¸å…³ |

---

## æ ¸å¿ƒè¡¨ç»“æž„è¯¦è§£

### 1. ç”¨æˆ·è¡¨ (user)

å­˜å‚¨ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­¦ç”Ÿã€ç®¡ç†å‘˜ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”®ï¼Œè‡ªå¢ž |
| student_no | VARCHAR(20) | æ˜¯ | å­¦å·ï¼Œå”¯ä¸€æ ‡è¯† |
| username | VARCHAR(50) | æ˜¯ | çœŸå®žå§“å |
| password | VARCHAR(255) | æ˜¯ | BCryptåŠ å¯†å¯†ç  |
| phone | VARCHAR(20) | å¦ | æ‰‹æœºå· |
| email | VARCHAR(100) | å¦ | é‚®ç®± |
| avatar | VARCHAR(255) | å¦ | å¤´åƒURL |
| gender | TINYINT | å¦ | æ€§åˆ«: 0å¥³ 1ç”· |
| college | VARCHAR(100) | å¦ | å­¦é™¢ |
| major | VARCHAR(100) | å¦ | ä¸“ä¸š |
| grade | VARCHAR(20) | å¦ | å¹´çº§ |
| class_name | VARCHAR(50) | å¦ | ç­çº§ |
| credit_score | INT | æ˜¯ | ä¿¡ç”¨ç§¯åˆ†(0-100)ï¼Œé»˜è®¤100 |
| total_hours | DECIMAL(10,2) | æ˜¯ | ç´¯è®¡å­¦ä¹ æ—¶é•¿(å°æ—¶) |
| total_reservations | INT | æ˜¯ | ç´¯è®¡é¢„çº¦æ¬¡æ•° |
| total_check_ins | INT | æ˜¯ | ç´¯è®¡æ‰“å¡å¤©æ•° |
| continuous_check_ins | INT | æ˜¯ | è¿žç»­æ‰“å¡å¤©æ•° |
| points | INT | æ˜¯ | ç§¯åˆ†(å¯å…‘æ¢) |
| level | INT | æ˜¯ | ç­‰çº§ |
| exp | INT | æ˜¯ | ç»éªŒå€¼ |
| bio | VARCHAR(255) | å¦ | ä¸ªäººç®€ä»‹ |
| role | VARCHAR(20) | æ˜¯ | è§’è‰²: STUDENT/ADMIN/SUPER_ADMIN |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0ç¦ç”¨ 1æ­£å¸¸ |
| last_login_time | DATETIME | å¦ | æœ€åŽç™»å½•æ—¶é—´ |
| last_login_ip | VARCHAR(50) | å¦ | æœ€åŽç™»å½•IP |
| created_at | DATETIME | æ˜¯ | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ˜¯ | æ›´æ–°æ—¶é—´ |

**ç´¢å¼•**ï¼š
- `idx_student_no` - å­¦å·ç´¢å¼•
- `idx_role` - è§’è‰²ç´¢å¼•
- `idx_credit_score` - ä¿¡ç”¨åˆ†ç´¢å¼•
- `idx_status` - çŠ¶æ€ç´¢å¼•
- `idx_college` - å­¦é™¢ç´¢å¼•
- `idx_level` - ç­‰çº§ç´¢å¼•

---

### 2. è‡ªä¹ å®¤è¡¨ (study_room)

å­˜å‚¨è‡ªä¹ å®¤åŸºæœ¬ä¿¡æ¯ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| name | VARCHAR(100) | æ˜¯ | è‡ªä¹ å®¤åç§° |
| code | VARCHAR(20) | å¦ | è‡ªä¹ å®¤ç¼–å·(å”¯ä¸€) |
| building | VARCHAR(100) | å¦ | æ‰€åœ¨å»ºç­‘ |
| floor | VARCHAR(20) | å¦ | æ¥¼å±‚ |
| room_number | VARCHAR(20) | å¦ | æˆ¿é—´å· |
| capacity | INT | æ˜¯ | åº§ä½æ€»æ•° |
| row_count | INT | æ˜¯ | åº§ä½è¡Œæ•° |
| col_count | INT | æ˜¯ | åº§ä½åˆ—æ•° |
| description | TEXT | å¦ | æè¿°ä¿¡æ¯ |
| facilities | VARCHAR(500) | å¦ | è®¾æ–½(JSON): ["ç©ºè°ƒ","WiFi"] |
| cover_image | VARCHAR(255) | å¦ | å°é¢å›¾ç‰‡ |
| images | TEXT | å¦ | å›¾ç‰‡é›†(JSONæ•°ç»„) |
| open_time | TIME | æ˜¯ | å¼€æ”¾æ—¶é—´ |
| close_time | TIME | æ˜¯ | å…³é—­æ—¶é—´ |
| advance_days | INT | æ˜¯ | æœ€å¤§æå‰é¢„çº¦å¤©æ•°ï¼Œé»˜è®¤7 |
| max_duration | INT | æ˜¯ | å•æ¬¡æœ€å¤§é¢„çº¦æ—¶é•¿(å°æ—¶) |
| min_credit_score | INT | æ˜¯ | æœ€ä½Žä¿¡ç”¨åˆ†è¦æ±‚ï¼Œé»˜è®¤60 |
| need_approve | TINYINT | æ˜¯ | æ˜¯å¦éœ€è¦å®¡æ‰¹ |
| allow_temp | TINYINT | æ˜¯ | æ˜¯å¦å…è®¸ä¸´æ—¶é¢„çº¦ |
| rating | DECIMAL(2,1) | æ˜¯ | è¯„åˆ† |
| rating_count | INT | æ˜¯ | è¯„åˆ†äººæ•° |
| today_reservations | INT | æ˜¯ | ä»Šæ—¥é¢„çº¦æ•° |
| total_reservations | INT | æ˜¯ | æ€»é¢„çº¦æ•° |
| manager_id | BIGINT | å¦ | ç®¡ç†å‘˜ID |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å…³é—­ 1å¼€æ”¾ 2ç»´æŠ¤ä¸­ |
| sort_order | INT | æ˜¯ | æŽ’åº |
| created_at | DATETIME | æ˜¯ | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ˜¯ | æ›´æ–°æ—¶é—´ |

---

### 3. åº§ä½è¡¨ (seat)

å­˜å‚¨åº§ä½ä¿¡æ¯ï¼Œå…³è”è‡ªä¹ å®¤ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| room_id | BIGINT | æ˜¯ | è‡ªä¹ å®¤ID(å¤–é”®) |
| seat_no | VARCHAR(20) | æ˜¯ | åº§ä½ç¼–å·å¦‚"A01" |
| row_num | INT | æ˜¯ | è¡Œå·(ä»Ž1å¼€å§‹) |
| col_num | INT | æ˜¯ | åˆ—å·(ä»Ž1å¼€å§‹) |
| seat_type | VARCHAR(20) | æ˜¯ | ç±»åž‹: NORMAL/POWER/WINDOW/CORNER/VIP |
| has_power | TINYINT | æ˜¯ | æ˜¯å¦æœ‰ç”µæº |
| has_lamp | TINYINT | æ˜¯ | æ˜¯å¦æœ‰å°ç¯ |
| has_computer | TINYINT | æ˜¯ | æ˜¯å¦æœ‰ç”µè„‘ |
| description | VARCHAR(255) | å¦ | å¤‡æ³¨ |
| rating | DECIMAL(2,1) | æ˜¯ | è¯„åˆ† |
| rating_count | INT | æ˜¯ | è¯„åˆ†äººæ•° |
| total_reservations | INT | æ˜¯ | æ€»é¢„çº¦æ•° |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0ä¸å¯ç”¨ 1å¯ç”¨ 2ç»´ä¿®ä¸­ |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_room_seat` (room_id, row_num, col_num)

---

### 4. æ—¶æ®µè¡¨ (time_slot)

å®šä¹‰å¯é¢„çº¦çš„æ—¶é—´æ®µã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| name | VARCHAR(50) | æ˜¯ | æ—¶æ®µåç§° |
| start_time | TIME | æ˜¯ | å¼€å§‹æ—¶é—´ |
| end_time | TIME | æ˜¯ | ç»“æŸæ—¶é—´ |
| duration | INT | å¦ | æ—¶é•¿(åˆ†é’Ÿ) |
| sort_order | INT | æ˜¯ | æŽ’åº |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0ç¦ç”¨ 1å¯ç”¨ |

**é¢„è®¾æ—¶æ®µ**ï¼š

| åç§° | æ—¶é—´ |
|-----|-----|
| æ—©é—´ | 08:00-10:00 |
| ä¸Šåˆ | 10:00-12:00 |
| ä¸­åˆ | 12:00-14:00 |
| ä¸‹åˆ | 14:00-16:00 |
| å‚æ™š | 16:00-18:00 |
| æ™šé—´A | 18:00-20:00 |
| æ™šé—´B | 20:00-22:00 |

---

### 5. é¢„çº¦è¡¨ (reservation)

å­˜å‚¨é¢„çº¦è®°å½•ï¼Œæ ¸å¿ƒä¸šåŠ¡è¡¨ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| reservation_no | VARCHAR(32) | æ˜¯ | é¢„çº¦ç¼–å·(å”¯ä¸€) |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID(å¤–é”®) |
| room_id | BIGINT | æ˜¯ | è‡ªä¹ å®¤ID(å¤–é”®) |
| seat_id | BIGINT | æ˜¯ | åº§ä½ID(å¤–é”®) |
| date | DATE | æ˜¯ | é¢„çº¦æ—¥æœŸ |
| time_slot_id | BIGINT | æ˜¯ | æ—¶æ®µID(å¤–é”®) |
| start_time | DATETIME | æ˜¯ | å¼€å§‹æ—¶é—´ |
| end_time | DATETIME | æ˜¯ | ç»“æŸæ—¶é—´ |
| status | VARCHAR(20) | æ˜¯ | çŠ¶æ€(è§ä¸‹è¡¨) |
| sign_in_time | DATETIME | å¦ | ç­¾åˆ°æ—¶é—´ |
| sign_out_time | DATETIME | å¦ | ç­¾é€€æ—¶é—´ |
| actual_duration | INT | å¦ | å®žé™…ä½¿ç”¨æ—¶é•¿(åˆ†é’Ÿ) |
| leave_time | DATETIME | å¦ | æš‚ç¦»æ—¶é—´ |
| return_time | DATETIME | å¦ | æš‚ç¦»è¿”å›žæ—¶é—´ |
| leave_count | INT | æ˜¯ | æš‚ç¦»æ¬¡æ•° |
| cancel_time | DATETIME | å¦ | å–æ¶ˆæ—¶é—´ |
| cancel_reason | VARCHAR(255) | å¦ | å–æ¶ˆåŽŸå›  |
| violation_type | VARCHAR(50) | å¦ | è¿çº¦ç±»åž‹ |
| earned_points | INT | æ˜¯ | èŽ·å¾—ç§¯åˆ† |
| earned_exp | INT | æ˜¯ | èŽ·å¾—ç»éªŒ |
| remark | VARCHAR(255) | å¦ | å¤‡æ³¨ |
| source | VARCHAR(20) | æ˜¯ | é¢„çº¦æ¥æº: WEB/APP/WECHAT |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_seat_date_slot` (seat_id, date, time_slot_id)

**é¢„çº¦çŠ¶æ€**ï¼š

| çŠ¶æ€ | è¯´æ˜Ž |
|-----|-----|
| PENDING | å¾…ç­¾åˆ° |
| SIGNED_IN | å·²ç­¾åˆ° |
| LEAVING | æš‚ç¦»ä¸­ |
| COMPLETED | å·²å®Œæˆ |
| CANCELLED | å·²å–æ¶ˆ |
| VIOLATED | è¿çº¦ |
| EXPIRED | å·²è¿‡æœŸ |

**çŠ¶æ€æµè½¬å›¾**ï¼š
```
PENDING â”€â”€ç­¾åˆ°â”€â”€> SIGNED_IN â”€â”€ç­¾é€€â”€â”€> COMPLETED
   â”‚                  â”‚
   â”‚è¶…æ—¶æœªç­¾åˆ°         â”‚æš‚ç¦»
   â†“                  â†“
VIOLATED          LEAVING â”€â”€è¿”å›žâ”€â”€> SIGNED_IN
                      â”‚
                      â”‚è¶…æ—¶
                      â†“
                  VIOLATED

PENDING â”€â”€å–æ¶ˆâ”€â”€> CANCELLED
```

---

### 6. è¿çº¦è®°å½•è¡¨ (violation_record)

è®°å½•ç”¨æˆ·è¿çº¦è¡Œä¸ºã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| reservation_id | BIGINT | å¦ | å…³è”é¢„çº¦ID |
| type | VARCHAR(50) | æ˜¯ | è¿çº¦ç±»åž‹ |
| description | VARCHAR(255) | å¦ | è¿çº¦æè¿° |
| deduct_score | INT | æ˜¯ | æ‰£é™¤ç§¯åˆ† |
| before_score | INT | å¦ | æ‰£é™¤å‰ç§¯åˆ† |
| after_score | INT | å¦ | æ‰£é™¤åŽç§¯åˆ† |
| appeal_status | TINYINT | æ˜¯ | ç”³è¯‰çŠ¶æ€ |
| appeal_reason | VARCHAR(500) | å¦ | ç”³è¯‰ç†ç”± |
| appeal_time | DATETIME | å¦ | ç”³è¯‰æ—¶é—´ |
| appeal_result | VARCHAR(255) | å¦ | ç”³è¯‰ç»“æžœ |
| processed_by | BIGINT | å¦ | å¤„ç†äºº |
| processed_time | DATETIME | å¦ | å¤„ç†æ—¶é—´ |

**è¿çº¦ç±»åž‹ä¸Žæ‰£åˆ†**ï¼š

| ç±»åž‹ | è¯´æ˜Ž | æ‰£åˆ† |
|-----|-----|-----|
| NO_SIGN_IN | æœªç­¾åˆ° | -10 |
| LATE_CANCEL | è¿Ÿå–æ¶ˆ(1å°æ—¶å†…) | -5 |
| LEAVE_TIMEOUT | æš‚ç¦»è¶…æ—¶ | -8 |
| EARLY_LEAVE | æå‰ç¦»å¼€æœªç­¾é€€ | -3 |

---

### 7. ä¿¡ç”¨ç§¯åˆ†è®°å½•è¡¨ (credit_record)

è®°å½•ç”¨æˆ·ç§¯åˆ†å˜åŠ¨åŽ†å²ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| change_score | INT | æ˜¯ | å˜åŠ¨ç§¯åˆ† |
| before_score | INT | æ˜¯ | å˜åŠ¨å‰ç§¯åˆ† |
| after_score | INT | æ˜¯ | å˜åŠ¨åŽç§¯åˆ† |
| type | VARCHAR(50) | æ˜¯ | å˜åŠ¨ç±»åž‹ |
| source_type | VARCHAR(50) | å¦ | æ¥æºç±»åž‹ |
| source_id | BIGINT | å¦ | æ¥æºID |
| description | VARCHAR(255) | å¦ | æè¿° |

---

### 8-11. å…¬å‘Š/é…ç½®/é»‘åå•/æ—¥å¿—è¡¨

*è¯¦è§sql/schema.sql*

---

### 12. æ”¶è—è¡¨ (favorite)

ç”¨æˆ·æ”¶è—è‡ªä¹ å®¤æˆ–åº§ä½ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| target_type | VARCHAR(20) | æ˜¯ | æ”¶è—ç±»åž‹: ROOM/SEAT |
| target_id | BIGINT | æ˜¯ | æ”¶è—ç›®æ ‡ID |
| created_at | DATETIME | æ˜¯ | åˆ›å»ºæ—¶é—´ |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_user_target` (user_id, target_type, target_id)

---

### 13. æ¯æ—¥ç­¾åˆ°æ‰“å¡è¡¨ (check_in_record)

ç”¨æˆ·æ¯æ—¥æ‰“å¡è®°å½•ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| check_in_date | DATE | æ˜¯ | ç­¾åˆ°æ—¥æœŸ |
| check_in_time | DATETIME | æ˜¯ | ç­¾åˆ°æ—¶é—´ |
| continuous_days | INT | æ˜¯ | è¿žç»­å¤©æ•° |
| earned_points | INT | æ˜¯ | èŽ·å¾—ç§¯åˆ† |
| earned_exp | INT | æ˜¯ | èŽ·å¾—ç»éªŒ |
| source | VARCHAR(20) | æ˜¯ | æ¥æº: MANUAL/AUTO |
| remark | VARCHAR(255) | å¦ | å¤‡æ³¨ |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_user_date` (user_id, check_in_date)

---

### 14. å­¦ä¹ ç›®æ ‡è¡¨ (study_goal)

ç”¨æˆ·è®¾å®šçš„å­¦ä¹ ç›®æ ‡ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| title | VARCHAR(100) | æ˜¯ | ç›®æ ‡æ ‡é¢˜ |
| description | TEXT | å¦ | ç›®æ ‡æè¿° |
| goal_type | VARCHAR(20) | æ˜¯ | ç±»åž‹: DAILY/WEEKLY/MONTHLY/CUSTOM |
| target_hours | DECIMAL(10,2) | æ˜¯ | ç›®æ ‡æ—¶é•¿(å°æ—¶) |
| completed_hours | DECIMAL(10,2) | æ˜¯ | å·²å®Œæˆæ—¶é•¿ |
| start_date | DATE | æ˜¯ | å¼€å§‹æ—¥æœŸ |
| end_date | DATE | æ˜¯ | ç»“æŸæ—¥æœŸ |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å·²å–æ¶ˆ 1è¿›è¡Œä¸­ 2å·²å®Œæˆ 3å·²è¿‡æœŸ |
| completed_at | DATETIME | å¦ | å®Œæˆæ—¶é—´ |
| earned_points | INT | æ˜¯ | å®Œæˆå¥–åŠ±ç§¯åˆ† |

---

### 15. æˆå°±å®šä¹‰è¡¨ (achievement)

ç³»ç»Ÿæˆå°±å®šä¹‰ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| name | VARCHAR(100) | æ˜¯ | æˆå°±åç§° |
| description | VARCHAR(255) | å¦ | æˆå°±æè¿° |
| icon | VARCHAR(255) | å¦ | å›¾æ ‡(emojiæˆ–URL) |
| badge_color | VARCHAR(20) | å¦ | å¾½ç« é¢œè‰² |
| category | VARCHAR(50) | æ˜¯ | åˆ†ç±»: STUDY/CHECK_IN/SOCIAL/SPECIAL |
| condition_type | VARCHAR(50) | æ˜¯ | æ¡ä»¶ç±»åž‹ |
| condition_value | INT | æ˜¯ | æ¡ä»¶å€¼ |
| reward_points | INT | æ˜¯ | å¥–åŠ±ç§¯åˆ† |
| reward_exp | INT | æ˜¯ | å¥–åŠ±ç»éªŒ |
| rarity | VARCHAR(20) | æ˜¯ | ç¨€æœ‰åº¦: COMMON/RARE/EPIC/LEGENDARY |
| is_hidden | TINYINT | æ˜¯ | æ˜¯å¦éšè—æˆå°± |
| sort_order | INT | æ˜¯ | æŽ’åº |
| status | TINYINT | æ˜¯ | çŠ¶æ€ |

**æˆå°±åˆ†ç±»**ï¼š

| åˆ†ç±» | è¯´æ˜Ž | ç¤ºä¾‹ |
|-----|-----|-----|
| STUDY | å­¦ä¹ ç±» | å­¦ä¹ æ—¶é•¿è¾¾åˆ°Xå°æ—¶ |
| CHECK_IN | æ‰“å¡ç±» | è¿žç»­æ‰“å¡Xå¤© |
| SOCIAL | ç¤¾äº¤ç±» | æ‹¥æœ‰Xä¸ªå¥½å‹ |
| SPECIAL | ç‰¹æ®Šç±» | æ—©èµ·ç­¾åˆ°Xæ¬¡ |

**ç¨€æœ‰åº¦**ï¼š

| ç¨€æœ‰åº¦ | è¯´æ˜Ž | é¢œè‰²å»ºè®® |
|-------|-----|---------|
| COMMON | æ™®é€š | ç°è‰² |
| RARE | ç¨€æœ‰ | è“è‰² |
| EPIC | å²è¯— | ç´«è‰² |
| LEGENDARY | ä¼ è¯´ | é‡‘è‰² |

---

### 16. ç”¨æˆ·æˆå°±è¡¨ (user_achievement)

ç”¨æˆ·å·²èŽ·å¾—/è¿›è¡Œä¸­çš„æˆå°±ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| achievement_id | BIGINT | æ˜¯ | æˆå°±ID |
| progress | INT | æ˜¯ | å½“å‰è¿›åº¦ |
| is_completed | TINYINT | æ˜¯ | æ˜¯å¦å®Œæˆ |
| completed_at | DATETIME | å¦ | å®Œæˆæ—¶é—´ |
| is_claimed | TINYINT | æ˜¯ | æ˜¯å¦å·²é¢†å–å¥–åŠ± |
| claimed_at | DATETIME | å¦ | é¢†å–æ—¶é—´ |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_user_achievement` (user_id, achievement_id)

---

### 17. æ¶ˆæ¯è¡¨ (message)

ç«™å†…æ¶ˆæ¯ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | æŽ¥æ”¶ç”¨æˆ·ID |
| title | VARCHAR(200) | æ˜¯ | æ ‡é¢˜ |
| content | TEXT | æ˜¯ | å†…å®¹ |
| type | VARCHAR(20) | æ˜¯ | ç±»åž‹: SYSTEM/RESERVATION/VIOLATION/ACHIEVEMENT/NOTICE |
| related_type | VARCHAR(50) | å¦ | å…³è”ç±»åž‹ |
| related_id | BIGINT | å¦ | å…³è”ID |
| is_read | TINYINT | æ˜¯ | æ˜¯å¦å·²è¯» |
| read_time | DATETIME | å¦ | é˜…è¯»æ—¶é—´ |

---

### 18. é¢„çº¦æé†’è¡¨ (reminder)

é¢„çº¦æé†’è®¾ç½®ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| reservation_id | BIGINT | æ˜¯ | é¢„çº¦ID |
| remind_type | VARCHAR(20) | æ˜¯ | ç±»åž‹: BEFORE_START/SIGN_IN/SIGN_OUT |
| remind_time | DATETIME | æ˜¯ | æé†’æ—¶é—´ |
| remind_minutes | INT | å¦ | æå‰åˆ†é’Ÿæ•° |
| is_sent | TINYINT | æ˜¯ | æ˜¯å¦å·²å‘é€ |
| sent_time | DATETIME | å¦ | å‘é€æ—¶é—´ |

---

### 19. åº§ä½è¯„ä»·è¡¨ (seat_review)

ç”¨æˆ·å¯¹åº§ä½çš„è¯„ä»·ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| reservation_id | BIGINT | æ˜¯ | é¢„çº¦ID |
| room_id | BIGINT | æ˜¯ | è‡ªä¹ å®¤ID |
| seat_id | BIGINT | æ˜¯ | åº§ä½ID |
| rating | INT | æ˜¯ | è¯„åˆ†(1-5) |
| content | VARCHAR(500) | å¦ | è¯„ä»·å†…å®¹ |
| tags | VARCHAR(255) | å¦ | æ ‡ç­¾(JSON) |
| images | TEXT | å¦ | å›¾ç‰‡(JSON) |
| is_anonymous | TINYINT | æ˜¯ | æ˜¯å¦åŒ¿å |
| like_count | INT | æ˜¯ | ç‚¹èµžæ•° |
| status | TINYINT | æ˜¯ | çŠ¶æ€ |

---

### 20. è‡ªä¹ å®¤æ¯æ—¥ç»Ÿè®¡è¡¨ (room_daily_stats)

æ¯æ—¥ç»Ÿè®¡æ•°æ®ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| room_id | BIGINT | æ˜¯ | è‡ªä¹ å®¤ID |
| stats_date | DATE | æ˜¯ | ç»Ÿè®¡æ—¥æœŸ |
| total_reservations | INT | æ˜¯ | é¢„çº¦æ€»æ•° |
| completed_count | INT | æ˜¯ | å®Œæˆæ•° |
| cancelled_count | INT | æ˜¯ | å–æ¶ˆæ•° |
| violated_count | INT | æ˜¯ | è¿çº¦æ•° |
| total_hours | DECIMAL(10,2) | æ˜¯ | æ€»ä½¿ç”¨æ—¶é•¿ |
| unique_users | INT | æ˜¯ | ç‹¬ç«‹ç”¨æˆ·æ•° |
| peak_hour | INT | å¦ | é«˜å³°å°æ—¶ |
| peak_count | INT | æ˜¯ | é«˜å³°æ—¶æ®µé¢„çº¦æ•° |
| usage_rate | DECIMAL(5,2) | æ˜¯ | ä½¿ç”¨çŽ‡(%) |
| avg_duration | INT | æ˜¯ | å¹³å‡ä½¿ç”¨æ—¶é•¿(åˆ†é’Ÿ) |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_room_date` (room_id, stats_date)

---

### 21. å¥½å‹å…³ç³»è¡¨ (friendship)

ç”¨æˆ·å¥½å‹å…³ç³»ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| friend_id | BIGINT | æ˜¯ | å¥½å‹ID |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å¾…ç¡®è®¤ 1å·²ç¡®è®¤ 2å·²æ‹’ç» 3å·²åˆ é™¤ |
| remark | VARCHAR(50) | å¦ | å¤‡æ³¨å |
| created_at | DATETIME | æ˜¯ | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ˜¯ | æ›´æ–°æ—¶é—´ |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_user_friend` (user_id, friend_id)

---

### 22. å­¦ä¹ å°ç»„è¡¨ (study_group)

å­¦ä¹ å°ç»„ä¿¡æ¯ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| name | VARCHAR(100) | æ˜¯ | å°ç»„åç§° |
| description | TEXT | å¦ | å°ç»„æè¿° |
| avatar | VARCHAR(255) | å¦ | å°ç»„å¤´åƒ |
| cover_image | VARCHAR(255) | å¦ | å°é¢å›¾ |
| creator_id | BIGINT | æ˜¯ | åˆ›å»ºè€…ID |
| max_members | INT | æ˜¯ | æœ€å¤§æˆå‘˜æ•° |
| member_count | INT | æ˜¯ | å½“å‰æˆå‘˜æ•° |
| total_hours | DECIMAL(10,2) | æ˜¯ | å°ç»„æ€»å­¦ä¹ æ—¶é•¿ |
| weekly_hours | DECIMAL(10,2) | æ˜¯ | æœ¬å‘¨å­¦ä¹ æ—¶é•¿ |
| is_public | TINYINT | æ˜¯ | æ˜¯å¦å…¬å¼€ |
| need_approve | TINYINT | æ˜¯ | åŠ å…¥éœ€å®¡æ‰¹ |
| tags | VARCHAR(255) | å¦ | æ ‡ç­¾ |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å·²è§£æ•£ 1æ­£å¸¸ |

---

### 23. å°ç»„æˆå‘˜è¡¨ (group_member)

å°ç»„æˆå‘˜å…³ç³»ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| group_id | BIGINT | æ˜¯ | å°ç»„ID |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| role | VARCHAR(20) | æ˜¯ | è§’è‰²: CREATOR/ADMIN/MEMBER |
| nickname | VARCHAR(50) | å¦ | å°ç»„å†…æ˜µç§° |
| contribution_hours | DECIMAL(10,2) | æ˜¯ | è´¡çŒ®æ—¶é•¿ |
| join_time | DATETIME | æ˜¯ | åŠ å…¥æ—¶é—´ |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å¾…å®¡æ‰¹ 1æ­£å¸¸ 2å·²é€€å‡º |

**å”¯ä¸€çº¦æŸ**ï¼š`uk_group_user` (group_id, user_id)

---

### 24. æŽ’è¡Œæ¦œå¿«ç…§è¡¨ (ranking_snapshot)

æŽ’è¡Œæ¦œåŽ†å²æ•°æ®ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| ranking_type | VARCHAR(20) | æ˜¯ | ç±»åž‹: DAILY/WEEKLY/MONTHLY |
| metric_type | VARCHAR(20) | æ˜¯ | æŒ‡æ ‡: HOURS/RESERVATIONS/CHECK_INS |
| snapshot_date | DATE | æ˜¯ | å¿«ç…§æ—¥æœŸ |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| rank_position | INT | æ˜¯ | æŽ’å |
| metric_value | DECIMAL(10,2) | æ˜¯ | æŒ‡æ ‡å€¼ |

---

### 25. åé¦ˆå»ºè®®è¡¨ (feedback)

ç”¨æˆ·åé¦ˆä¸Žå»ºè®®ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| type | VARCHAR(20) | æ˜¯ | ç±»åž‹: SUGGESTION/BUG/COMPLAINT/OTHER |
| title | VARCHAR(200) | æ˜¯ | æ ‡é¢˜ |
| content | TEXT | æ˜¯ | å†…å®¹ |
| images | TEXT | å¦ | å›¾ç‰‡(JSON) |
| contact | VARCHAR(100) | å¦ | è”ç³»æ–¹å¼ |
| related_room_id | BIGINT | å¦ | ç›¸å…³è‡ªä¹ å®¤ |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å¾…å¤„ç† 1å¤„ç†ä¸­ 2å·²è§£å†³ 3å·²å…³é—­ |
| reply_content | TEXT | å¦ | å›žå¤å†…å®¹ |
| reply_time | DATETIME | å¦ | å›žå¤æ—¶é—´ |
| reply_by | BIGINT | å¦ | å›žå¤äºº |

---

### 26. ç§¯åˆ†å•†åŸŽå•†å“è¡¨ (point_product)

å•†åŸŽå•†å“ä¿¡æ¯ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| name | VARCHAR(100) | æ˜¯ | å•†å“åç§° |
| description | TEXT | å¦ | å•†å“æè¿° |
| image | VARCHAR(255) | å¦ | å•†å“å›¾ç‰‡ |
| category | VARCHAR(50) | å¦ | åˆ†ç±» |
| points_required | INT | æ˜¯ | æ‰€éœ€ç§¯åˆ† |
| stock | INT | æ˜¯ | åº“å­˜(-1ä¸ºæ— é™) |
| limit_per_user | INT | æ˜¯ | æ¯äººé™è´­(0ä¸é™) |
| start_time | DATETIME | å¦ | ä¸Šæž¶æ—¶é—´ |
| end_time | DATETIME | å¦ | ä¸‹æž¶æ—¶é—´ |
| exchange_count | INT | æ˜¯ | å…‘æ¢æ¬¡æ•° |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0ä¸‹æž¶ 1ä¸Šæž¶ |
| sort_order | INT | æ˜¯ | æŽ’åº |

---

### 27. ç§¯åˆ†å…‘æ¢è®°å½•è¡¨ (point_exchange)

ç§¯åˆ†å…‘æ¢è®°å½•ã€‚

| å­—æ®µ | ç±»åž‹ | å¿…å¡« | è¯´æ˜Ž |
|-----|-----|-----|-----|
| id | BIGINT | æ˜¯ | ä¸»é”® |
| user_id | BIGINT | æ˜¯ | ç”¨æˆ·ID |
| product_id | BIGINT | æ˜¯ | å•†å“ID |
| product_name | VARCHAR(100) | å¦ | å•†å“åç§°(å†—ä½™) |
| points_used | INT | æ˜¯ | ä½¿ç”¨ç§¯åˆ† |
| quantity | INT | æ˜¯ | æ•°é‡ |
| status | TINYINT | æ˜¯ | çŠ¶æ€: 0å¾…å‘æ”¾ 1å·²å‘æ”¾ 2å·²å–æ¶ˆ |
| remark | VARCHAR(255) | å¦ | å¤‡æ³¨ |

---

## ERå›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     USER ç›¸å…³                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                    â”‚                                    â”‚
         â–¼                                    â–¼                                    â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   user   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚blacklist â”‚                        â”‚friendshipâ”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                                        
        â”‚  1:N                                                                   
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚ credit_record  â”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚violation_recordâ”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚check_in_record â”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚  study_goal    â”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
        â”‚            â”‚user_achievementâ”‚â”€â”€â”€â”€>â”‚  achievement   â”‚                   
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚   favorite     â”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
        â”‚            â”‚   message      â”‚                                          
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
        â”‚            â”‚ group_member   â”‚â”€â”€â”€â”€>â”‚  study_group   â”‚                   
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
        â”‚                                                                        
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   
        â”‚            â”‚ point_exchange â”‚â”€â”€â”€â”€>â”‚ point_product  â”‚                   
        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   
        â”‚                                                                        
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
                     â”‚   feedback     â”‚                                          
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                  RESERVATION ç›¸å…³                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   user   â”‚â”€â”€â”€â”€>â”‚  reservation   â”‚<â”€â”€â”€â”€â”‚   seat   â”‚<â”€â”€â”€â”€â”‚study_roomâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                    â”‚
                            â”‚                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   time_slot    â”‚    â”‚  seat_review â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    reminder    â”‚    â”‚ room_daily_stats â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    ç³»ç»Ÿç®¡ç†                          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ system_config  â”‚     â”‚ operation_log  â”‚     â”‚ranking_snapshot  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    notice      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç´¢å¼•è®¾è®¡

### æ ¸å¿ƒç´¢å¼•

```sql
-- ç”¨æˆ·è¡¨ç´¢å¼•
CREATE INDEX idx_user_credit ON user(credit_score DESC);
CREATE INDEX idx_user_points ON user(points DESC);
CREATE INDEX idx_user_level ON user(level DESC);

-- é¢„çº¦è¡¨ç´¢å¼•
CREATE INDEX idx_reservation_user_date ON reservation(user_id, date);
CREATE INDEX idx_reservation_room_date ON reservation(room_id, date, status);
CREATE INDEX idx_reservation_status_time ON reservation(status, start_time);

-- åº§ä½è¡¨ç´¢å¼•
CREATE INDEX idx_seat_room_status ON seat(room_id, status);

-- æ‰“å¡è¡¨ç´¢å¼•
CREATE INDEX idx_checkin_user_date ON check_in_record(user_id, check_in_date DESC);

-- æŽ’è¡Œæ¦œç´¢å¼•
CREATE INDEX idx_ranking_type_date ON ranking_snapshot(ranking_type, metric_type, snapshot_date);
```

---

## æ•°æ®å­—å…¸

### ç”¨æˆ·è§’è‰² (user.role)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| STUDENT | å­¦ç”Ÿ |
| ADMIN | è‡ªä¹ å®¤ç®¡ç†å‘˜ |
| SUPER_ADMIN | è¶…çº§ç®¡ç†å‘˜ |

### åº§ä½ç±»åž‹ (seat.seat_type)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| NORMAL | æ™®é€šåº§ä½ |
| POWER | æœ‰ç”µæºåº§ä½ |
| WINDOW | é çª—åº§ä½ |
| CORNER | è§’è½åº§ä½ |
| VIP | VIPåº§ä½ |

### é¢„çº¦çŠ¶æ€ (reservation.status)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| PENDING | å¾…ç­¾åˆ° |
| SIGNED_IN | å·²ç­¾åˆ° |
| LEAVING | æš‚ç¦»ä¸­ |
| COMPLETED | å·²å®Œæˆ |
| CANCELLED | å·²å–æ¶ˆ |
| VIOLATED | è¿çº¦ |
| EXPIRED | å·²è¿‡æœŸ |

### æˆå°±ç¨€æœ‰åº¦ (achievement.rarity)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| COMMON | æ™®é€š |
| RARE | ç¨€æœ‰ |
| EPIC | å²è¯— |
| LEGENDARY | ä¼ è¯´ |

### ç›®æ ‡ç±»åž‹ (study_goal.goal_type)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| DAILY | æ—¥ç›®æ ‡ |
| WEEKLY | å‘¨ç›®æ ‡ |
| MONTHLY | æœˆç›®æ ‡ |
| CUSTOM | è‡ªå®šä¹‰ |

### æ¶ˆæ¯ç±»åž‹ (message.type)

| å€¼ | è¯´æ˜Ž |
|---|-----|
| SYSTEM | ç³»ç»Ÿæ¶ˆæ¯ |
| RESERVATION | é¢„çº¦ç›¸å…³ |
| VIOLATION | è¿çº¦é€šçŸ¥ |
| ACHIEVEMENT | æˆå°±è§£é” |
| NOTICE | å…¬å‘Šé€šçŸ¥ |

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0  
**æ›´æ–°æ—¥æœŸ**ï¼š2026-01-21
